<html>
<head>
<title>Online Status</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
    <h1>Online User Count</h1>
    <h2><span id="connected">{{ connected }}</span> 
        users are on this page right now.</h2>

    {% block body %}
    <h1>Client Online Status</h1>
    <!-- <div id="online_status"></div> -->
    <!-- 
    <ul class="list-group">
        {% for c in clients %}
            <li class="list-group-item">{{c}}</li>
        {% endfor %}
    </ul>
    -->
    <table class="table table-striped table-bordered table-condensed">
        <tr>
            <th>CNAME</th>
            <th>STATUS</th>
        </tr>
        {% for c in clients %}
            <tr>
                <td>{{c}}</td>
                <td>1</td>
            </tr>
        {% endfor %}
    </table>
    {% endblock %}

    <script type="text/javascript" 
                src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var url = "http://" + document.domain + ":" + location.port;
            var socket = io.connect(url);
            socket.on('msg', function(msg) {
                $("#connected").html(msg.count);
            });
            
            socket.emit('status');
            socket.on('online', function(msg) {
                // $("#online_status").prepend('<h3>' + msg.flag + '<h3>');
                if (msg.flag == 1) {
                  // pass
                } 
                else if (msg.flag == 0) {
                  // pass
                }
                else {
                  // pass
                };
            });

        });
    </script>

</body>
</html>

